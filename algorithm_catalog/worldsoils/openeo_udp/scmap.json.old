{
  "process_graph": {
    "loadcollection1": {
      "process_id": "load_collection",
      "arguments": {
        "bands": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12",
          "SCL",
          "sunZenithAngles"
        ],
        "id": "SENTINEL2_L2A",
        "properties": {
          "eo:cloud_cover": {
            "process_graph": {
              "lte1": {
                "process_id": "lte",
                "arguments": {
                  "x": {
                    "from_parameter": "value"
                  },
                  "y": {
                    "from_parameter": "max_cloud_cover"
                  }
                },
                "result": true
              }
            }
          }
        },
        "spatial_extent": {
          "from_parameter": "aoi"
        },
        "temporal_extent": {
          "from_parameter": "temporal_extent"
        }
      }
    },
    "reducedimension1": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "loadcollection1"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement1": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 10
              },
              "result": true
            }
          }
        }
      }
    },
    "resamplecubespatial1": {
      "process_id": "resample_cube_spatial",
      "arguments": {
        "data": {
          "from_node": "loadcollection1"
        },
        "method": "near",
        "target": {
          "from_node": "reducedimension1"
        }
      }
    },
    "loadstac1": {
      "process_id": "load_stac",
      "arguments": {
        "bands": [
          "S2_s2cr_pvir2_threshold_img"
        ],
        "spatial_extent": {
          "from_parameter": "aoi"
        },
        "url": "https://github.com/Schiggebam/dlr_scmap_resources/raw/main/th_S2_s2cr_buffered_stac_yflip.json"
      }
    },
    "resamplecubespatial2": {
      "process_id": "resample_cube_spatial",
      "arguments": {
        "data": {
          "from_node": "loadstac1"
        },
        "method": "bilinear",
        "target": {
          "from_node": "resamplecubespatial1"
        }
      }
    },
    "mergecubes1": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "resamplecubespatial1"
        },
        "cube2": {
          "from_node": "resamplecubespatial2"
        }
      }
    },
    "reducedimension2": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mergecubes1"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement2": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 10
              }
            },
            "eq1": {
              "process_id": "eq",
              "arguments": {
                "x": {
                  "from_node": "arrayelement2"
                },
                "y": 4
              }
            },
            "eq2": {
              "process_id": "eq",
              "arguments": {
                "x": {
                  "from_node": "arrayelement2"
                },
                "y": 5
              }
            },
            "or1": {
              "process_id": "or",
              "arguments": {
                "x": {
                  "from_node": "eq1"
                },
                "y": {
                  "from_node": "eq2"
                }
              }
            },
            "eq3": {
              "process_id": "eq",
              "arguments": {
                "x": {
                  "from_node": "arrayelement2"
                },
                "y": 6
              }
            },
            "or2": {
              "process_id": "or",
              "arguments": {
                "x": {
                  "from_node": "or1"
                },
                "y": {
                  "from_node": "eq3"
                }
              }
            },
            "not1": {
              "process_id": "not",
              "arguments": {
                "x": {
                  "from_node": "or2"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mask1": {
      "process_id": "mask",
      "arguments": {
        "data": {
          "from_node": "mergecubes1"
        },
        "mask": {
          "from_node": "reducedimension2"
        }
      }
    },
    "reducedimension3": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mask1"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement3": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 11
              }
            },
            "gt1": {
              "process_id": "gt",
              "arguments": {
                "x": {
                  "from_node": "arrayelement3"
                },
                "y": 70
              },
              "result": true
            }
          }
        }
      }
    },
    "mask2": {
      "process_id": "mask",
      "arguments": {
        "data": {
          "from_node": "mask1"
        },
        "mask": {
          "from_node": "reducedimension3"
        }
      }
    },
    "filterbands1": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "data": {
          "from_node": "mask2"
        }
      }
    },
    "reducedimension4": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "filterbands1"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "mean1": {
              "process_id": "mean",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "filterbands2": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "data": {
          "from_node": "reducedimension4"
        }
      }
    },
    "renamelabels1": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "filterbands2"
        },
        "dimension": "bands",
        "source": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "target": [
          "MREF_B02",
          "MREF_B03",
          "MREF_B04",
          "MREF_B05",
          "MREF_B06",
          "MREF_B07",
          "MREF_B08",
          "MREF_B8A",
          "MREF_B11",
          "MREF_B12"
        ]
      }
    },
    "filterbands3": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "data": {
          "from_node": "mask2"
        }
      }
    },
    "reducedimension5": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "filterbands3"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "sd1": {
              "process_id": "sd",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "filterbands4": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "data": {
          "from_node": "reducedimension5"
        }
      }
    },
    "renamelabels2": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "filterbands4"
        },
        "dimension": "bands",
        "source": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "target": [
          "MREF-STD_B02",
          "MREF-STD_B03",
          "MREF-STD_B04",
          "MREF-STD_B05",
          "MREF-STD_B06",
          "MREF-STD_B07",
          "MREF-STD_B08",
          "MREF-STD_B8A",
          "MREF-STD_B11",
          "MREF-STD_B12"
        ]
      }
    },
    "mergecubes2": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "renamelabels1"
        },
        "cube2": {
          "from_node": "renamelabels2"
        }
      }
    },
    "reducedimension6": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mask2"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement4": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 6
              }
            },
            "arrayelement5": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 2
              }
            },
            "subtract1": {
              "process_id": "subtract",
              "arguments": {
                "x": {
                  "from_node": "arrayelement4"
                },
                "y": {
                  "from_node": "arrayelement5"
                }
              }
            },
            "add1": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "arrayelement4"
                },
                "y": {
                  "from_node": "arrayelement5"
                }
              }
            },
            "divide1": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "subtract1"
                },
                "y": {
                  "from_node": "add1"
                }
              }
            },
            "arrayelement6": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 9
              }
            },
            "subtract2": {
              "process_id": "subtract",
              "arguments": {
                "x": {
                  "from_node": "arrayelement4"
                },
                "y": {
                  "from_node": "arrayelement6"
                }
              }
            },
            "add2": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "arrayelement4"
                },
                "y": {
                  "from_node": "arrayelement6"
                }
              }
            },
            "divide2": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "subtract2"
                },
                "y": {
                  "from_node": "add2"
                }
              }
            },
            "add3": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "divide1"
                },
                "y": {
                  "from_node": "divide2"
                }
              }
            },
            "arrayelement7": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 12
              }
            },
            "gt2": {
              "process_id": "gt",
              "arguments": {
                "x": {
                  "from_node": "add3"
                },
                "y": {
                  "from_node": "arrayelement7"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mask3": {
      "process_id": "mask",
      "arguments": {
        "data": {
          "from_node": "mask2"
        },
        "mask": {
          "from_node": "reducedimension6"
        }
      }
    },
    "loadcollection2": {
      "process_id": "load_collection",
      "arguments": {
        "bands": [
          "MAP"
        ],
        "id": "ESA_WORLDCOVER_10M_2021_V2",
        "spatial_extent": {
          "from_parameter": "aoi"
        },
        "temporal_extent": null
      }
    },
    "reducedimension7": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "loadcollection2"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "first1": {
              "process_id": "first",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "resamplecubespatial3": {
      "process_id": "resample_cube_spatial",
      "arguments": {
        "data": {
          "from_node": "reducedimension7"
        },
        "method": "near",
        "target": {
          "from_node": "resamplecubespatial1"
        }
      }
    },
    "apply1": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "resamplecubespatial3"
        },
        "process": {
          "process_graph": {
            "eq4": {
              "process_id": "eq",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 50
              },
              "result": true
            }
          }
        }
      }
    },
    "apply2": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "resamplecubespatial3"
        },
        "process": {
          "process_graph": {
            "eq5": {
              "process_id": "eq",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 80
              },
              "result": true
            }
          }
        }
      }
    },
    "mergecubes3": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "apply1"
        },
        "cube2": {
          "from_node": "apply2"
        },
        "overlap_resolver": {
          "process_graph": {
            "or3": {
              "process_id": "or",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": {
                  "from_parameter": "y"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mask4": {
      "process_id": "mask",
      "arguments": {
        "data": {
          "from_node": "mask3"
        },
        "mask": {
          "from_node": "mergecubes3"
        }
      }
    },
    "reducedimension8": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mask4"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement8": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 0
              },
              "result": true
            }
          }
        }
      }
    },
    "applydimension1": {
      "process_id": "apply_dimension",
      "arguments": {
        "data": {
          "from_node": "reducedimension8"
        },
        "dimension": "t",
        "process": {
          "process_graph": {
            "median1": {
              "process_id": "median",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              }
            },
            "subtract3": {
              "process_id": "subtract",
              "arguments": {
                "x": {
                  "from_parameter": "data"
                },
                "y": {
                  "from_node": "median1"
                }
              }
            },
            "absolute1": {
              "process_id": "absolute",
              "arguments": {
                "x": {
                  "from_node": "subtract3"
                }
              }
            },
            "median2": {
              "process_id": "median",
              "arguments": {
                "data": {
                  "from_node": "absolute1"
                }
              }
            },
            "multiply1": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_node": "median2"
                },
                "y": 1.4826
              }
            },
            "multiply2": {
              "process_id": "multiply",
              "arguments": {
                "x": 3,
                "y": {
                  "from_node": "multiply1"
                }
              }
            },
            "add4": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "median1"
                },
                "y": {
                  "from_node": "multiply2"
                }
              }
            },
            "gt3": {
              "process_id": "gt",
              "arguments": {
                "x": {
                  "from_parameter": "data"
                },
                "y": {
                  "from_node": "add4"
                }
              }
            },
            "add5": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "median1"
                },
                "y": 80.0
              }
            },
            "gt4": {
              "process_id": "gt",
              "arguments": {
                "x": {
                  "from_parameter": "data"
                },
                "y": {
                  "from_node": "add5"
                }
              }
            },
            "and1": {
              "process_id": "and",
              "arguments": {
                "x": {
                  "from_node": "gt3"
                },
                "y": {
                  "from_node": "gt4"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mask5": {
      "process_id": "mask",
      "arguments": {
        "data": {
          "from_node": "mask4"
        },
        "mask": {
          "from_node": "applydimension1"
        }
      }
    },
    "reducedimension9": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mask4"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement9": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 0
              },
              "result": true
            }
          }
        }
      }
    },
    "reducedimension10": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "reducedimension9"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "count1": {
              "process_id": "count",
              "arguments": {
                "context": {
                  "from_parameter": "context"
                },
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "apply3": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "reducedimension10"
        },
        "process": {
          "process_graph": {
            "lt1": {
              "process_id": "lt",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 3
              },
              "result": true
            }
          }
        }
      }
    },
    "mask6": {
      "process_id": "mask",
      "arguments": {
        "data": {
          "from_node": "mask5"
        },
        "mask": {
          "from_node": "apply3"
        }
      }
    },
    "reducedimension11": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mask6"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "mean2": {
              "process_id": "mean",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "filterbands5": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "data": {
          "from_node": "reducedimension11"
        }
      }
    },
    "renamelabels3": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "filterbands5"
        },
        "dimension": "bands",
        "source": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "target": [
          "SRC_B02",
          "SRC_B03",
          "SRC_B04",
          "SRC_B05",
          "SRC_B06",
          "SRC_B07",
          "SRC_B08",
          "SRC_B8A",
          "SRC_B11",
          "SRC_B12"
        ]
      }
    },
    "mergecubes4": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes2"
        },
        "cube2": {
          "from_node": "renamelabels3"
        }
      }
    },
    "reducedimension12": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mask6"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "sd2": {
              "process_id": "sd",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "filterbands6": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "data": {
          "from_node": "reducedimension12"
        }
      }
    },
    "renamelabels4": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "filterbands6"
        },
        "dimension": "bands",
        "source": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "target": [
          "SRC-STD_B02",
          "SRC-STD_B03",
          "SRC-STD_B04",
          "SRC-STD_B05",
          "SRC-STD_B06",
          "SRC-STD_B07",
          "SRC-STD_B08",
          "SRC-STD_B8A",
          "SRC-STD_B11",
          "SRC-STD_B12"
        ]
      }
    },
    "mergecubes5": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes4"
        },
        "cube2": {
          "from_node": "renamelabels4"
        }
      }
    },
    "reducedimension13": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mask2"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement10": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 0
              },
              "result": true
            }
          }
        }
      }
    },
    "reducedimension14": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "reducedimension13"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "count2": {
              "process_id": "count",
              "arguments": {
                "context": {
                  "from_parameter": "context"
                },
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "adddimension1": {
      "process_id": "add_dimension",
      "arguments": {
        "data": {
          "from_node": "reducedimension14"
        },
        "label": "valid pixel count",
        "name": "bands",
        "type": "bands"
      }
    },
    "adddimension2": {
      "process_id": "add_dimension",
      "arguments": {
        "data": {
          "from_node": "reducedimension10"
        },
        "label": "bare soil count",
        "name": "bands",
        "type": "bands"
      }
    },
    "mergecubes6": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "adddimension1"
        },
        "cube2": {
          "from_node": "adddimension2"
        }
      }
    },
    "reducedimension15": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mergecubes6"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement11": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 1
              }
            },
            "arrayelement12": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 0
              }
            },
            "divide3": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "arrayelement11"
                },
                "y": {
                  "from_node": "arrayelement12"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "adddimension3": {
      "process_id": "add_dimension",
      "arguments": {
        "data": {
          "from_node": "reducedimension15"
        },
        "label": "bare soil frequency",
        "name": "bands",
        "type": "bands"
      }
    },
    "mergecubes7": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes5"
        },
        "cube2": {
          "from_node": "adddimension3"
        }
      },
      "result": true
    }
  },
  "id": "scmap_composite",
  "summary": "...",
  "description": "# Documentation for `cdse_scmap_apex.py`\n\nThis document provides an overview of the code and functionality implemented in the `cdse_scmap_apex.py` script.\n\n## Table of Contents\n1. [Introduction](#introduction)\n2. [Dependencies](#dependencies)\n3. [Usage](#usage)\n4. [Examples](#examples)\n\n---\n\n## Introduction\n\nThis is the implementation of the code SCMaP (developed at the German Aerospace Center) as an OpenEO UDP.\nFor detailled explanation of the output products, refer to the [Documentation](https://c.geoservice.dlr.de/web/datasets/soilsuite_eur_5y)\n\n\n---\n\n## Dependencies\n\nThe script requires the following Python libraries:\n- `openeo`\n\n\n---\n\n## Usage\n\nThis is a openEO User-Defined-Process. Please refer to [the offical documentation](https://open-eo.github.io/openeo-python-client/udp.html).\n\n---\n\n## Examples\n\n\n\n---\n\n## License\n\nThis script is licensed under the CC-BY-4.0 licence.\n\n---\n\n## Contact\n\nFor questions or issues, contact any of the project maintainer at [paul.karlshoefer@dlr.de], [pablo.angelo@dlr.de] or [uta.heiden@dlr.de].\n",
  "returns": {
    "description": "A data cube with the newly computed values.\n\nAll dimensions stay the same, except for the dimensions specified in corresponding parameters. There are three cases how the dimensions can change:\n\n1. The source dimension is the target dimension:\n   - The (number of) dimensions remain unchanged as the source dimension is the target dimension.\n   - The source dimension properties name and type remain unchanged.\n   - The dimension labels, the reference system and the resolution are preserved only if the number of values in the source dimension is equal to the number of values computed by the process. Otherwise, all other dimension properties change as defined in the list below.\n2. The source dimension is not the target dimension. The target dimension exists with a single label only:\n   - The number of dimensions decreases by one as the source dimension is 'dropped' and the target dimension is filled with the processed data that originates from the source dimension.\n   - The target dimension properties name and type remain unchanged. All other dimension properties change as defined in the list below.\n3. The source dimension is not the target dimension and the latter does not exist:\n   - The number of dimensions remain unchanged, but the source dimension is replaced with the target dimension.\n   - The target dimension has the specified name and the type other. All other dimension properties are set as defined in the list below.\n\nUnless otherwise stated above, for the given (target) dimension the following applies:\n\n- the number of dimension labels is equal to the number of values computed by the process,\n- the dimension labels are incrementing integers starting from zero,\n- the resolution changes, and\n- the reference system is undefined.",
    "schema": {
      "type": "object",
      "subtype": "datacube"
    }
  },
  "categories": [
    "sentinel-2",
    "composites",
    "bare surface"
  ],
  "parameters": [
    {
      "name": "aoi",
      "description": "Bounding box like: { \"west\": 11.1, \"south\": 48.0, \"east\": 11.3, \"north\": 48.2, \"crs\": \"EPSG:4326\"}",
      "schema": {
        "type": "object",
        "subtype": "bounding-box",
        "required": [
          "west",
          "south",
          "east",
          "north"
        ],
        "properties": {
          "west": {
            "type": "number",
            "description": "West (lower left corner, coordinate axis 1)."
          },
          "south": {
            "type": "number",
            "description": "South (lower left corner, coordinate axis 2)."
          },
          "east": {
            "type": "number",
            "description": "East (upper right corner, coordinate axis 1)."
          },
          "north": {
            "type": "number",
            "description": "North (upper right corner, coordinate axis 2)."
          },
          "crs": {
            "description": "Coordinate reference system of the extent, specified as as [EPSG code](http://www.epsg-registry.org/) or [WKT2 CRS string](http://docs.opengeospatial.org/is/18-010r7/18-010r7.html). Defaults to `4326` (EPSG code 4326) unless the client explicitly requests a different coordinate reference system.",
            "anyOf": [
              {
                "type": "integer",
                "subtype": "epsg-code",
                "title": "EPSG Code",
                "minimum": 1000
              },
              {
                "type": "string",
                "subtype": "wkt2-definition",
                "title": "WKT2 definition"
              }
            ],
            "default": 4326
          }
        }
      },
      "default": {
        "west": 11.1,
        "south": 48.0,
        "east": 11.3,
        "north": 48.2,
        "crs": "EPSG:4326"
      },
      "optional": true
    },
    {
      "name": "temporal_extent",
      "description": "Temporal extent specified as two-element array with start and end date/date-time.",
      "schema": {
        "type": "array",
        "subtype": "temporal-interval",
        "uniqueItems": true,
        "minItems": 2,
        "maxItems": 2,
        "items": {
          "anyOf": [
            {
              "type": "string",
              "subtype": "date-time",
              "format": "date-time"
            },
            {
              "type": "string",
              "subtype": "date",
              "format": "date"
            },
            {
              "type": "null"
            }
          ]
        }
      }
    },
    {
      "name": "max_cloud_cover",
      "description": "Maximum scene-wide cloud cover for the scene to be considered.",
      "schema": {
        "type": "number"
      },
      "optional": true,
      "default": 70.0
    },
    {
      "name": "bands",
      "description": "SRC|SRC-STD|MREF|MREF-STD|SFREQ",
      "schema": {
        "type": "array",
        "items": {
          "type": "string",
          "enum": [
            "SRC",
            "SRC-STD",
            "MREF",
            "MREF-STD",
            "SFREQ"
          ]
        }
      },
      "optional": true,
      "default": [
        "SRC",
        "SRC-STD",
        "MREF",
        "MREF-STD",
        "SFREQ"
      ]
    }
  ]
}
