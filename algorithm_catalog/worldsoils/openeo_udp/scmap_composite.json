{
  "process_graph": {
    "loadcollection1": {
      "process_id": "load_collection",
      "arguments": {
        "bands": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "id": "SENTINEL2_L2A",
        "properties": {
          "eo:cloud_cover": {
            "process_graph": {
              "lte1": {
                "process_id": "lte",
                "arguments": {
                  "x": {
                    "from_parameter": "value"
                  },
                  "y": {
                    "from_parameter": "max_cloud_cover"
                  }
                },
                "result": true
              }
            }
          }
        },
        "spatial_extent": {
          "from_parameter": "bounding_box"
        },
        "temporal_extent": {
          "from_parameter": "temporal_extent"
        }
      }
    },
    "resamplespatial1": {
      "process_id": "resample_spatial",
      "arguments": {
        "align": "upper-left",
        "data": {
          "from_node": "loadcollection1"
        },
        "method": "average",
        "projection": null,
        "resolution": 20
      }
    },
    "loadcollection2": {
      "process_id": "load_collection",
      "arguments": {
        "bands": [
          "SCL",
          "sunZenithAngles"
        ],
        "id": "SENTINEL2_L2A",
        "properties": {
          "eo:cloud_cover": {
            "process_graph": {
              "lte2": {
                "process_id": "lte",
                "arguments": {
                  "x": {
                    "from_parameter": "value"
                  },
                  "y": {
                    "from_parameter": "max_cloud_cover"
                  }
                },
                "result": true
              }
            }
          }
        },
        "spatial_extent": {
          "from_parameter": "bounding_box"
        },
        "temporal_extent": {
          "from_parameter": "temporal_extent"
        }
      }
    },
    "resamplecubespatial1": {
      "process_id": "resample_cube_spatial",
      "arguments": {
        "data": {
          "from_node": "loadcollection2"
        },
        "method": "near",
        "target": {
          "from_node": "resamplespatial1"
        }
      }
    },
    "apply1": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "resamplecubespatial1"
        },
        "process": {
          "process_graph": {
            "gt1": {
              "process_id": "gt",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 70
              },
              "result": true
            }
          }
        }
      }
    },
    "mask1": {
      "process_id": "mask",
      "arguments": {
        "data": {
          "from_node": "resamplespatial1"
        },
        "mask": {
          "from_node": "apply1"
        }
      }
    },
    "loadcollection3": {
      "process_id": "load_collection",
      "arguments": {
        "bands": [
          "SCL",
          "sunZenithAngles"
        ],
        "id": "SENTINEL2_L2A",
        "properties": {
          "eo:cloud_cover": {
            "process_graph": {
              "lte3": {
                "process_id": "lte",
                "arguments": {
                  "x": {
                    "from_parameter": "value"
                  },
                  "y": {
                    "from_parameter": "max_cloud_cover"
                  }
                },
                "result": true
              }
            }
          }
        },
        "spatial_extent": {
          "from_parameter": "bounding_box"
        },
        "temporal_extent": {
          "from_parameter": "temporal_extent"
        }
      }
    },
    "resamplecubespatial2": {
      "process_id": "resample_cube_spatial",
      "arguments": {
        "data": {
          "from_node": "loadcollection3"
        },
        "method": "mode",
        "target": {
          "from_node": "resamplespatial1"
        }
      }
    },
    "reducedimension1": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "resamplecubespatial2"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement1": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 0
              },
              "result": true
            }
          }
        }
      }
    },
    "apply2": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "reducedimension1"
        },
        "process": {
          "process_graph": {
            "eq1": {
              "process_id": "eq",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 3
              }
            },
            "eq2": {
              "process_id": "eq",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 8
              }
            },
            "eq3": {
              "process_id": "eq",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 9
              }
            },
            "eq4": {
              "process_id": "eq",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 10
              }
            },
            "eq5": {
              "process_id": "eq",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 1
              }
            },
            "eq6": {
              "process_id": "eq",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 11
              }
            },
            "eq7": {
              "process_id": "eq",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 0
              }
            },
            "eq8": {
              "process_id": "eq",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 2
              }
            },
            "eq9": {
              "process_id": "eq",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 7
              }
            },
            "arraycreate1": {
              "process_id": "array_create",
              "arguments": {
                "data": [
                  {
                    "from_node": "eq1"
                  },
                  {
                    "from_node": "eq2"
                  },
                  {
                    "from_node": "eq3"
                  },
                  {
                    "from_node": "eq4"
                  },
                  {
                    "from_node": "eq5"
                  },
                  {
                    "from_node": "eq6"
                  },
                  {
                    "from_node": "eq7"
                  },
                  {
                    "from_node": "eq8"
                  },
                  {
                    "from_node": "eq9"
                  }
                ]
              }
            },
            "any1": {
              "process_id": "any",
              "arguments": {
                "data": {
                  "from_node": "arraycreate1"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mask2": {
      "process_id": "mask",
      "arguments": {
        "data": {
          "from_node": "mask1"
        },
        "mask": {
          "from_node": "apply2"
        }
      }
    },
    "reducedimension2": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mask2"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement2": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 6
              }
            },
            "arrayelement3": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 2
              }
            },
            "subtract1": {
              "process_id": "subtract",
              "arguments": {
                "x": {
                  "from_node": "arrayelement2"
                },
                "y": {
                  "from_node": "arrayelement3"
                }
              }
            },
            "add1": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "arrayelement2"
                },
                "y": {
                  "from_node": "arrayelement3"
                }
              }
            },
            "divide1": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "subtract1"
                },
                "y": {
                  "from_node": "add1"
                }
              }
            },
            "arrayelement4": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 9
              }
            },
            "subtract2": {
              "process_id": "subtract",
              "arguments": {
                "x": {
                  "from_node": "arrayelement2"
                },
                "y": {
                  "from_node": "arrayelement4"
                }
              }
            },
            "add2": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "arrayelement2"
                },
                "y": {
                  "from_node": "arrayelement4"
                }
              }
            },
            "divide2": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "subtract2"
                },
                "y": {
                  "from_node": "add2"
                }
              }
            },
            "add3": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "divide1"
                },
                "y": {
                  "from_node": "divide2"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "adddimension1": {
      "process_id": "add_dimension",
      "arguments": {
        "data": {
          "from_node": "reducedimension2"
        },
        "label": "pvir2",
        "name": "bands",
        "type": "bands"
      }
    },
    "mergecubes1": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mask2"
        },
        "cube2": {
          "from_node": "adddimension1"
        }
      }
    },
    "loadstac1": {
      "process_id": "load_stac",
      "arguments": {
        "bands": [
          "S2_s2cr_pvir2_threshold_img"
        ],
        "spatial_extent": {
          "from_parameter": "bounding_box"
        },
        "url": "https://raw.githubusercontent.com/Schiggebam/dlr_scmap_resources/refs/heads/main/th_S2_s2cr_buffered_stac_yflip_no_t.json"
      }
    },
    "resamplecubespatial3": {
      "process_id": "resample_cube_spatial",
      "arguments": {
        "data": {
          "from_node": "loadstac1"
        },
        "method": "bilinear",
        "target": {
          "from_node": "mask2"
        }
      }
    },
    "reducedimension3": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "resamplecubespatial3"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "first1": {
              "process_id": "first",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "adddimension2": {
      "process_id": "add_dimension",
      "arguments": {
        "data": {
          "from_node": "reducedimension3"
        },
        "label": "th_img",
        "name": "bands",
        "type": "bands"
      }
    },
    "reducedimension4": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "adddimension2"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "mean1": {
              "process_id": "mean",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mergecubes2": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes1"
        },
        "cube2": {
          "from_node": "reducedimension4"
        }
      }
    },
    "reducedimension5": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mergecubes2"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement5": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 10
              }
            },
            "arrayelement6": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 11
              }
            },
            "gt2": {
              "process_id": "gt",
              "arguments": {
                "x": {
                  "from_node": "arrayelement5"
                },
                "y": {
                  "from_node": "arrayelement6"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mask3": {
      "process_id": "mask",
      "arguments": {
        "data": {
          "from_node": "mergecubes2"
        },
        "mask": {
          "from_node": "reducedimension5"
        }
      }
    },
    "loadcollection4": {
      "process_id": "load_collection",
      "arguments": {
        "bands": [
          "MAP"
        ],
        "id": "ESA_WORLDCOVER_10M_2021_V2",
        "spatial_extent": {
          "from_parameter": "bounding_box"
        },
        "temporal_extent": null
      }
    },
    "reducedimension6": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "loadcollection4"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "first2": {
              "process_id": "first",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "resamplecubespatial4": {
      "process_id": "resample_cube_spatial",
      "arguments": {
        "data": {
          "from_node": "reducedimension6"
        },
        "method": "near",
        "target": {
          "from_node": "mask2"
        }
      }
    },
    "apply3": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "resamplecubespatial4"
        },
        "process": {
          "process_graph": {
            "eq10": {
              "process_id": "eq",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 50
              },
              "result": true
            }
          }
        }
      }
    },
    "apply4": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "resamplecubespatial4"
        },
        "process": {
          "process_graph": {
            "eq11": {
              "process_id": "eq",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 80
              },
              "result": true
            }
          }
        }
      }
    },
    "mergecubes3": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "apply3"
        },
        "cube2": {
          "from_node": "apply4"
        },
        "overlap_resolver": {
          "process_graph": {
            "or1": {
              "process_id": "or",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": {
                  "from_parameter": "y"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mask4": {
      "process_id": "mask",
      "arguments": {
        "data": {
          "from_node": "mask3"
        },
        "mask": {
          "from_node": "mergecubes3"
        }
      }
    },
    "reducedimension7": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mask4"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement7": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 0
              },
              "result": true
            }
          }
        }
      }
    },
    "applydimension1": {
      "process_id": "apply_dimension",
      "arguments": {
        "data": {
          "from_node": "reducedimension7"
        },
        "dimension": "t",
        "process": {
          "process_graph": {
            "median1": {
              "process_id": "median",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              }
            },
            "subtract3": {
              "process_id": "subtract",
              "arguments": {
                "x": {
                  "from_parameter": "data"
                },
                "y": {
                  "from_node": "median1"
                }
              }
            },
            "absolute1": {
              "process_id": "absolute",
              "arguments": {
                "x": {
                  "from_node": "subtract3"
                }
              }
            },
            "median2": {
              "process_id": "median",
              "arguments": {
                "data": {
                  "from_node": "absolute1"
                }
              }
            },
            "multiply1": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_node": "median2"
                },
                "y": 1.4826
              }
            },
            "multiply2": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_parameter": "nmad_sigma"
                },
                "y": {
                  "from_node": "multiply1"
                }
              }
            },
            "add4": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "median1"
                },
                "y": {
                  "from_node": "multiply2"
                }
              }
            },
            "gt3": {
              "process_id": "gt",
              "arguments": {
                "x": {
                  "from_parameter": "data"
                },
                "y": {
                  "from_node": "add4"
                }
              }
            },
            "add5": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "median1"
                },
                "y": 80.0
              }
            },
            "gt4": {
              "process_id": "gt",
              "arguments": {
                "x": {
                  "from_parameter": "data"
                },
                "y": {
                  "from_node": "add5"
                }
              }
            },
            "and1": {
              "process_id": "and",
              "arguments": {
                "x": {
                  "from_node": "gt3"
                },
                "y": {
                  "from_node": "gt4"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mask5": {
      "process_id": "mask",
      "arguments": {
        "data": {
          "from_node": "mask4"
        },
        "mask": {
          "from_node": "applydimension1"
        }
      }
    },
    "reducedimension8": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mask5"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "mean2": {
              "process_id": "mean",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "renamelabels1": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "reducedimension8"
        },
        "dimension": "bands",
        "source": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "target": [
          "SRC_B02",
          "SRC_B03",
          "SRC_B04",
          "SRC_B05",
          "SRC_B06",
          "SRC_B07",
          "SRC_B08",
          "SRC_B8A",
          "SRC_B11",
          "SRC_B12"
        ]
      }
    },
    "reducedimension9": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mask5"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "sd1": {
              "process_id": "sd",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "filterbands1": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "data": {
          "from_node": "reducedimension9"
        }
      }
    },
    "renamelabels2": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "filterbands1"
        },
        "dimension": "bands",
        "source": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "target": [
          "SRC-STD_B02",
          "SRC-STD_B03",
          "SRC-STD_B04",
          "SRC-STD_B05",
          "SRC-STD_B06",
          "SRC-STD_B07",
          "SRC-STD_B08",
          "SRC-STD_B8A",
          "SRC-STD_B11",
          "SRC-STD_B12"
        ]
      }
    },
    "mergecubes4": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "renamelabels1"
        },
        "cube2": {
          "from_node": "renamelabels2"
        }
      }
    },
    "reducedimension10": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mask2"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "mean3": {
              "process_id": "mean",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "filterbands2": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "data": {
          "from_node": "reducedimension10"
        }
      }
    },
    "renamelabels3": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "filterbands2"
        },
        "dimension": "bands",
        "source": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "target": [
          "MREF_B02",
          "MREF_B03",
          "MREF_B04",
          "MREF_B05",
          "MREF_B06",
          "MREF_B07",
          "MREF_B08",
          "MREF_B8A",
          "MREF_B11",
          "MREF_B12"
        ]
      }
    },
    "mergecubes5": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes4"
        },
        "cube2": {
          "from_node": "renamelabels3"
        }
      }
    },
    "reducedimension11": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mask2"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "sd2": {
              "process_id": "sd",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "filterbands3": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "data": {
          "from_node": "reducedimension11"
        }
      }
    },
    "renamelabels4": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "filterbands3"
        },
        "dimension": "bands",
        "source": [
          "B02",
          "B03",
          "B04",
          "B05",
          "B06",
          "B07",
          "B08",
          "B8A",
          "B11",
          "B12"
        ],
        "target": [
          "MREF-STD_B02",
          "MREF-STD_B03",
          "MREF-STD_B04",
          "MREF-STD_B05",
          "MREF-STD_B06",
          "MREF-STD_B07",
          "MREF-STD_B08",
          "MREF-STD_B8A",
          "MREF-STD_B11",
          "MREF-STD_B12"
        ]
      }
    },
    "mergecubes6": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes5"
        },
        "cube2": {
          "from_node": "renamelabels4"
        }
      }
    },
    "reducedimension12": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mask1"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement8": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 0
              },
              "result": true
            }
          }
        }
      }
    },
    "reducedimension13": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "reducedimension12"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "count1": {
              "process_id": "count",
              "arguments": {
                "context": {
                  "from_parameter": "context"
                },
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "adddimension3": {
      "process_id": "add_dimension",
      "arguments": {
        "data": {
          "from_node": "reducedimension13"
        },
        "label": "ValidPixels",
        "name": "bands",
        "type": "bands"
      }
    },
    "mergecubes7": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes6"
        },
        "cube2": {
          "from_node": "adddimension3"
        }
      }
    },
    "reducedimension14": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mask5"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement9": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 0
              },
              "result": true
            }
          }
        }
      }
    },
    "reducedimension15": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "reducedimension14"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "count2": {
              "process_id": "count",
              "arguments": {
                "context": {
                  "from_parameter": "context"
                },
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "adddimension4": {
      "process_id": "add_dimension",
      "arguments": {
        "data": {
          "from_node": "reducedimension15"
        },
        "label": "BareSoilPixelsCount",
        "name": "bands",
        "type": "bands"
      }
    },
    "mergecubes8": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes7"
        },
        "cube2": {
          "from_node": "adddimension4"
        }
      }
    },
    "filterbands4": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "SRC-STD_B02"
        ],
        "data": {
          "from_node": "mergecubes8"
        }
      }
    },
    "reducedimension16": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mergecubes8"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement10": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 43
              },
              "result": true
            }
          }
        }
      }
    },
    "apply5": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "reducedimension16"
        },
        "process": {
          "process_graph": {
            "sqrt1": {
              "process_id": "sqrt",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mergecubes9": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "filterbands4"
        },
        "cube2": {
          "from_node": "apply5"
        },
        "overlap_resolver": {
          "process_graph": {
            "divide3": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": {
                  "from_parameter": "y"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "apply6": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "mergecubes9"
        },
        "process": {
          "process_graph": {
            "multiply3": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 1.96
              },
              "result": true
            }
          }
        }
      }
    },
    "renamelabels5": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "apply6"
        },
        "dimension": "bands",
        "target": [
          "SRC-CI95_B02",
          "SRC-CI95_B03",
          "SRC-CI95_B04",
          "SRC-CI95_B05",
          "SRC-CI95_B06",
          "SRC-CI95_B07",
          "SRC-CI95_B08",
          "SRC-CI95_B8A",
          "SRC-CI95_B11",
          "SRC-CI95_B12"
        ]
      }
    },
    "filterbands5": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "SRC-STD_B03"
        ],
        "data": {
          "from_node": "mergecubes8"
        }
      }
    },
    "reducedimension17": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mergecubes8"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement11": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 43
              },
              "result": true
            }
          }
        }
      }
    },
    "apply7": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "reducedimension17"
        },
        "process": {
          "process_graph": {
            "sqrt2": {
              "process_id": "sqrt",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mergecubes10": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "filterbands5"
        },
        "cube2": {
          "from_node": "apply7"
        },
        "overlap_resolver": {
          "process_graph": {
            "divide4": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": {
                  "from_parameter": "y"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "apply8": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "mergecubes10"
        },
        "process": {
          "process_graph": {
            "multiply4": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 1.96
              },
              "result": true
            }
          }
        }
      }
    },
    "renamelabels6": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "apply8"
        },
        "dimension": "bands",
        "target": [
          "SRC-CI95_B02",
          "SRC-CI95_B03",
          "SRC-CI95_B04",
          "SRC-CI95_B05",
          "SRC-CI95_B06",
          "SRC-CI95_B07",
          "SRC-CI95_B08",
          "SRC-CI95_B8A",
          "SRC-CI95_B11",
          "SRC-CI95_B12"
        ]
      }
    },
    "mergecubes11": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "renamelabels5"
        },
        "cube2": {
          "from_node": "renamelabels6"
        }
      }
    },
    "filterbands6": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "SRC-STD_B04"
        ],
        "data": {
          "from_node": "mergecubes8"
        }
      }
    },
    "reducedimension18": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mergecubes8"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement12": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 43
              },
              "result": true
            }
          }
        }
      }
    },
    "apply9": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "reducedimension18"
        },
        "process": {
          "process_graph": {
            "sqrt3": {
              "process_id": "sqrt",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mergecubes12": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "filterbands6"
        },
        "cube2": {
          "from_node": "apply9"
        },
        "overlap_resolver": {
          "process_graph": {
            "divide5": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": {
                  "from_parameter": "y"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "apply10": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "mergecubes12"
        },
        "process": {
          "process_graph": {
            "multiply5": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 1.96
              },
              "result": true
            }
          }
        }
      }
    },
    "renamelabels7": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "apply10"
        },
        "dimension": "bands",
        "target": [
          "SRC-CI95_B02",
          "SRC-CI95_B03",
          "SRC-CI95_B04",
          "SRC-CI95_B05",
          "SRC-CI95_B06",
          "SRC-CI95_B07",
          "SRC-CI95_B08",
          "SRC-CI95_B8A",
          "SRC-CI95_B11",
          "SRC-CI95_B12"
        ]
      }
    },
    "mergecubes13": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes11"
        },
        "cube2": {
          "from_node": "renamelabels7"
        }
      }
    },
    "filterbands7": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "SRC-STD_B05"
        ],
        "data": {
          "from_node": "mergecubes8"
        }
      }
    },
    "reducedimension19": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mergecubes8"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement13": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 43
              },
              "result": true
            }
          }
        }
      }
    },
    "apply11": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "reducedimension19"
        },
        "process": {
          "process_graph": {
            "sqrt4": {
              "process_id": "sqrt",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mergecubes14": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "filterbands7"
        },
        "cube2": {
          "from_node": "apply11"
        },
        "overlap_resolver": {
          "process_graph": {
            "divide6": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": {
                  "from_parameter": "y"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "apply12": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "mergecubes14"
        },
        "process": {
          "process_graph": {
            "multiply6": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 1.96
              },
              "result": true
            }
          }
        }
      }
    },
    "renamelabels8": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "apply12"
        },
        "dimension": "bands",
        "target": [
          "SRC-CI95_B02",
          "SRC-CI95_B03",
          "SRC-CI95_B04",
          "SRC-CI95_B05",
          "SRC-CI95_B06",
          "SRC-CI95_B07",
          "SRC-CI95_B08",
          "SRC-CI95_B8A",
          "SRC-CI95_B11",
          "SRC-CI95_B12"
        ]
      }
    },
    "mergecubes15": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes13"
        },
        "cube2": {
          "from_node": "renamelabels8"
        }
      }
    },
    "filterbands8": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "SRC-STD_B06"
        ],
        "data": {
          "from_node": "mergecubes8"
        }
      }
    },
    "reducedimension20": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mergecubes8"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement14": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 43
              },
              "result": true
            }
          }
        }
      }
    },
    "apply13": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "reducedimension20"
        },
        "process": {
          "process_graph": {
            "sqrt5": {
              "process_id": "sqrt",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mergecubes16": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "filterbands8"
        },
        "cube2": {
          "from_node": "apply13"
        },
        "overlap_resolver": {
          "process_graph": {
            "divide7": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": {
                  "from_parameter": "y"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "apply14": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "mergecubes16"
        },
        "process": {
          "process_graph": {
            "multiply7": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 1.96
              },
              "result": true
            }
          }
        }
      }
    },
    "renamelabels9": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "apply14"
        },
        "dimension": "bands",
        "target": [
          "SRC-CI95_B02",
          "SRC-CI95_B03",
          "SRC-CI95_B04",
          "SRC-CI95_B05",
          "SRC-CI95_B06",
          "SRC-CI95_B07",
          "SRC-CI95_B08",
          "SRC-CI95_B8A",
          "SRC-CI95_B11",
          "SRC-CI95_B12"
        ]
      }
    },
    "mergecubes17": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes15"
        },
        "cube2": {
          "from_node": "renamelabels9"
        }
      }
    },
    "filterbands9": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "SRC-STD_B07"
        ],
        "data": {
          "from_node": "mergecubes8"
        }
      }
    },
    "reducedimension21": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mergecubes8"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement15": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 43
              },
              "result": true
            }
          }
        }
      }
    },
    "apply15": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "reducedimension21"
        },
        "process": {
          "process_graph": {
            "sqrt6": {
              "process_id": "sqrt",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mergecubes18": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "filterbands9"
        },
        "cube2": {
          "from_node": "apply15"
        },
        "overlap_resolver": {
          "process_graph": {
            "divide8": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": {
                  "from_parameter": "y"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "apply16": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "mergecubes18"
        },
        "process": {
          "process_graph": {
            "multiply8": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 1.96
              },
              "result": true
            }
          }
        }
      }
    },
    "renamelabels10": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "apply16"
        },
        "dimension": "bands",
        "target": [
          "SRC-CI95_B02",
          "SRC-CI95_B03",
          "SRC-CI95_B04",
          "SRC-CI95_B05",
          "SRC-CI95_B06",
          "SRC-CI95_B07",
          "SRC-CI95_B08",
          "SRC-CI95_B8A",
          "SRC-CI95_B11",
          "SRC-CI95_B12"
        ]
      }
    },
    "mergecubes19": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes17"
        },
        "cube2": {
          "from_node": "renamelabels10"
        }
      }
    },
    "filterbands10": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "SRC-STD_B08"
        ],
        "data": {
          "from_node": "mergecubes8"
        }
      }
    },
    "reducedimension22": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mergecubes8"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement16": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 43
              },
              "result": true
            }
          }
        }
      }
    },
    "apply17": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "reducedimension22"
        },
        "process": {
          "process_graph": {
            "sqrt7": {
              "process_id": "sqrt",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mergecubes20": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "filterbands10"
        },
        "cube2": {
          "from_node": "apply17"
        },
        "overlap_resolver": {
          "process_graph": {
            "divide9": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": {
                  "from_parameter": "y"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "apply18": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "mergecubes20"
        },
        "process": {
          "process_graph": {
            "multiply9": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 1.96
              },
              "result": true
            }
          }
        }
      }
    },
    "renamelabels11": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "apply18"
        },
        "dimension": "bands",
        "target": [
          "SRC-CI95_B02",
          "SRC-CI95_B03",
          "SRC-CI95_B04",
          "SRC-CI95_B05",
          "SRC-CI95_B06",
          "SRC-CI95_B07",
          "SRC-CI95_B08",
          "SRC-CI95_B8A",
          "SRC-CI95_B11",
          "SRC-CI95_B12"
        ]
      }
    },
    "mergecubes21": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes19"
        },
        "cube2": {
          "from_node": "renamelabels11"
        }
      }
    },
    "filterbands11": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "SRC-STD_B8A"
        ],
        "data": {
          "from_node": "mergecubes8"
        }
      }
    },
    "reducedimension23": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mergecubes8"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement17": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 43
              },
              "result": true
            }
          }
        }
      }
    },
    "apply19": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "reducedimension23"
        },
        "process": {
          "process_graph": {
            "sqrt8": {
              "process_id": "sqrt",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mergecubes22": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "filterbands11"
        },
        "cube2": {
          "from_node": "apply19"
        },
        "overlap_resolver": {
          "process_graph": {
            "divide10": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": {
                  "from_parameter": "y"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "apply20": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "mergecubes22"
        },
        "process": {
          "process_graph": {
            "multiply10": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 1.96
              },
              "result": true
            }
          }
        }
      }
    },
    "renamelabels12": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "apply20"
        },
        "dimension": "bands",
        "target": [
          "SRC-CI95_B02",
          "SRC-CI95_B03",
          "SRC-CI95_B04",
          "SRC-CI95_B05",
          "SRC-CI95_B06",
          "SRC-CI95_B07",
          "SRC-CI95_B08",
          "SRC-CI95_B8A",
          "SRC-CI95_B11",
          "SRC-CI95_B12"
        ]
      }
    },
    "mergecubes23": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes21"
        },
        "cube2": {
          "from_node": "renamelabels12"
        }
      }
    },
    "filterbands12": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "SRC-STD_B11"
        ],
        "data": {
          "from_node": "mergecubes8"
        }
      }
    },
    "reducedimension24": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mergecubes8"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement18": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 43
              },
              "result": true
            }
          }
        }
      }
    },
    "apply21": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "reducedimension24"
        },
        "process": {
          "process_graph": {
            "sqrt9": {
              "process_id": "sqrt",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mergecubes24": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "filterbands12"
        },
        "cube2": {
          "from_node": "apply21"
        },
        "overlap_resolver": {
          "process_graph": {
            "divide11": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": {
                  "from_parameter": "y"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "apply22": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "mergecubes24"
        },
        "process": {
          "process_graph": {
            "multiply11": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 1.96
              },
              "result": true
            }
          }
        }
      }
    },
    "renamelabels13": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "apply22"
        },
        "dimension": "bands",
        "target": [
          "SRC-CI95_B02",
          "SRC-CI95_B03",
          "SRC-CI95_B04",
          "SRC-CI95_B05",
          "SRC-CI95_B06",
          "SRC-CI95_B07",
          "SRC-CI95_B08",
          "SRC-CI95_B8A",
          "SRC-CI95_B11",
          "SRC-CI95_B12"
        ]
      }
    },
    "mergecubes25": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes23"
        },
        "cube2": {
          "from_node": "renamelabels13"
        }
      }
    },
    "filterbands13": {
      "process_id": "filter_bands",
      "arguments": {
        "bands": [
          "SRC-STD_B12"
        ],
        "data": {
          "from_node": "mergecubes8"
        }
      }
    },
    "reducedimension25": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mergecubes8"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement19": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 43
              },
              "result": true
            }
          }
        }
      }
    },
    "apply23": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "reducedimension25"
        },
        "process": {
          "process_graph": {
            "sqrt10": {
              "process_id": "sqrt",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mergecubes26": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "filterbands13"
        },
        "cube2": {
          "from_node": "apply23"
        },
        "overlap_resolver": {
          "process_graph": {
            "divide12": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": {
                  "from_parameter": "y"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "apply24": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "mergecubes26"
        },
        "process": {
          "process_graph": {
            "multiply12": {
              "process_id": "multiply",
              "arguments": {
                "x": {
                  "from_parameter": "x"
                },
                "y": 1.96
              },
              "result": true
            }
          }
        }
      }
    },
    "renamelabels14": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "apply24"
        },
        "dimension": "bands",
        "target": [
          "SRC-CI95_B02",
          "SRC-CI95_B03",
          "SRC-CI95_B04",
          "SRC-CI95_B05",
          "SRC-CI95_B06",
          "SRC-CI95_B07",
          "SRC-CI95_B08",
          "SRC-CI95_B8A",
          "SRC-CI95_B11",
          "SRC-CI95_B12"
        ]
      }
    },
    "mergecubes27": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes25"
        },
        "cube2": {
          "from_node": "renamelabels14"
        }
      }
    },
    "mergecubes28": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes8"
        },
        "cube2": {
          "from_node": "mergecubes27"
        }
      }
    },
    "reducedimension26": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "mergecubes28"
        },
        "dimension": "bands",
        "reducer": {
          "process_graph": {
            "arrayelement20": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "label": "BareSoilPixelsCount"
              }
            },
            "arrayelement21": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "label": "ValidPixels"
              }
            },
            "divide13": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "arrayelement20"
                },
                "y": {
                  "from_node": "arrayelement21"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "adddimension5": {
      "process_id": "add_dimension",
      "arguments": {
        "data": {
          "from_node": "reducedimension26"
        },
        "label": "BareSoilFrequency",
        "name": "bands",
        "type": "bands"
      }
    },
    "mergecubes29": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "mergecubes28"
        },
        "cube2": {
          "from_node": "adddimension5"
        }
      },
      "result": true
    }
  },
  "id": "scmap_composite",
  "summary": "Bare surface composite with statistical producs",
  "description": "# SCMaP OpenEO User defined process\nThis algorithm is used to build bare surface mean composites, by averaging all bare surface observations over a specfic range in time.\n\nFor a detailed description about the algorithm, please refer to the [Documentation](https://download.geoservice.dlr.de/SOILSUITE/files/EUROPE_5Y/000_Data_Overview/SoilSuite_Data_Description_Europe_V1.pdf) of SoilSuite, or to any of the papers linked below.\n\n\n## Usage\nPlese refer to the APEx Documentation [Documentation](https://esa-apex.github.io/apex_documentation/guides/udp_writer_guide.html) and the [GitHub](https://github.com/ESA-APEx/apex_algorithms)\n\n## Literature references\n[SoilSuite Europe](https://geoservice.dlr.de/web/datasets/soilsuite_eur_5y)\n- Rogge, D., Bauer, A, Zeidler, J., M\u00c3\u00bcller, A., Esch, T. and Heiden, U. (2018). Building an exposed soil composite processor (SCMaP) for mapping spatial and temporal characteristics of soils with Landsat imagery (1984-2014). Remote Sensing of Environment, 205, 1-17. ISSN 0034-4257 DOI: 10.3390/rs14184526\n- Heiden, U., d\u00e2\u20ac\u2122Angelo, P., Schwind, P., Karlsh\u00c3\u00b6fer, P., M\u00c3\u00bcller, R., Zepp, S., Wiesmeier, M., & Reinartz, P. (2022). Soil Reflectance Composites\u00e2\u20ac\u201dImproved Thresholding and Performance Evaluation. Remote Sensing, 14(18), 4526. DOI: 10.1016/j.rse.2017.11.004\n- Karlshoefer, P., d\u00e2\u20ac\u2122Angelo, P., Eberle, J., & Heiden, U. (2025). Evaluation framework for the generation of continental bare surface reflectance composites. Geoderma, 459. DOI: 10.1016/j.geoderma.2025.117340\n\n\n## License\n[CC-BY-4.0](https://spdx.org/licenses/CC-BY-4.0)\n\n## Authors / Contact\n- Uta Heiden (Producer, Processor) DLR/EOC Imaging Spectroscopy\n- - uta.heiden@dlr.de\n- Pablo d'Angelo (Producer, Processor) DLR/EOC Photogrammetry and Image Analysis\n- - pablo.angelo.dlr.de\n- Paul Karlsh\u00c3\u00b6fer (Producer, Processor, OpenEO UDP) DLR/EOC Imaging Spectroscopy\n- - paul.karlshoefer@dlr.de\nEOC Geoservice (Host) DLR/EOC\n\n\n## Acknowledgments / Funding\n- European Space Agency\n\n\n\n\n\nAuthor: paul.karlshoefer@dlr.de (German Aerospace Center)\n\n# Description\n\nThis algorithm generates a Sentinel-2 based composite for a selected area and temporal extent. By default, the resolution of the output is 10 meters.\n\nThe used compositing method is the \"max-NDVI\" method, which selects the pixel with the highest NDVI value for each pixel location and within the time window.\nThe method falls under the 'rank composite' category, and ensures that selected spectral band values for any individual pixel all come from the same observation.\n\nThe method generates good results for timeseries analytics, but spatially neighbouring pixels may be selected from different observations,\nwhich leads to visual discontinuities in the result.\n\n# Performance characteristics\n\nThe method is computationally efficient, as it only requires the B04, B08 and SCL bands to determine the rank score. Loading\nof other bands can be minimized to read only selected observations.\n\n\n# Examples\n\nThe image below shows a typical result over an agricultural area.\n\n![max_ndvi_example.png](max_ndvi_example.png)\n\nThe examples below show typical resource usage figures. They illustrate that the cost varies as a function of the parameters,\nand most importantly that it is not possible to linearly extrapolate the cost from one example to another.\n\n\n## 3-month composite over Denmark\n\nA complete example including STAC metadata is shown here:\n\nhttps://radiantearth.github.io/stac-browser/#/external/s3.waw3-1.cloudferro.com/swift/v1/APEx-examples/max_ndvi_denmark/collection.json\n\nThe processing platform reported these usage statistics for the example:\n\n```\nCredits: 63\nCPU usage: 47.743,722 cpu-seconds\nWall time: 1.948 seconds\nInput Pixel 10.997,635 mega-pixel\nMax Executor Memory: 3,239 gb\nMemory usage: 154.767.121,977 mb-seconds\nNetwork Received: 1.677.537.930.040 b\n```\n\nThe relative cost is 1 CDSE platform credits per km\u00c2\u00b2 for a 3 month input window.\nThe cost per input pixel is 0.0057 credits per megapixel.\n\n## 15-month composite over Denmark\n\nIn a second example, a longer compositing window was tested, generating a 3-band result. Here we see a lower cost per km\u00c2\u00b2, but a similar cost per input\npixel.\n\n```\nCredits: 189\nCPU usage: 77.621,979 cpu-seconds\nWall time: 5.499 seconds\nInput Pixel: 31.494,448 mega-pixel\nMax Executor Memory: 4,332 gb\nMemory usage: 564.094.942,143 mb-seconds\nNetwork Received: 872.636.866.126 b\n```\n\nThe relative cost is 0.03 CDSE platform credits per km\u00c2\u00b2 for a 15 month input window.\nThe cost per input pixel is 0.006 credits per megapixel.\n\n# Literature references\n\nThe max-ndvi compositing method has been applied to multiple sensors, as described in literature:\n\nThis publication describes characteristics of the method when applied to AVHRR data:\nhttps://www.tandfonline.com/doi/abs/10.1080/01431168608948945\n\nThis publication applied it to Landsat data, for cropland estimation:\nhttps://www.nature.com/articles/s43016-021-00429-z\n\n# Known limitations\n\nThe method uses a vegetation index as scoring metric to determine the best pixel, making it only suitable for land applications.\nBare or urban areas may not be well represented in the composite.\n\nIt favours the observation which is least contaminated by atmospheric effects, but does not guarantee a fully uncontaminated composite.\n\nFor individual time windows of up to 3 months, the method was efficient up to 100x100km areas. For larger areas of interest, we recommend splitting the area into smaller tiles.\n\n\n# Known artifacts\n\nArtifacts are expected over water and urban areas.\n\n![max_ndvi_water_artifacts.png](max_ndvi_water_artifacts.png)\n\nResidual cloud artifacts may be present in the composite, especially for smaller time windows or during cloudy seasons.\nThe cloud artifacts are caused by the limited capabilities of the default Sentinel-2 cloud detection mechanism to correctly identify all clouds.\n\n![max_ndvi_cloud_artifacts.png](max_ndvi_cloud_artifacts.png)\n",
  "returns": {
    "description": "Bare surface composite with statistical producs",
    "schema": {
      "type": "object",
      "subtype": "datacube"
    }
  },
  "categories": [
    "sentinel-2",
    "composites",
    "bare surface"
  ],
  "parameters": [
    {
      "name": "temporal_extent",
      "description": "Temporal extend",
      "schema": {
        "type": "array",
        "subtype": "temporal-interval",
        "uniqueItems": true,
        "minItems": 2,
        "maxItems": 2,
        "items": {
          "anyOf": [
            {
              "type": "string",
              "subtype": "date-time",
              "format": "date-time"
            },
            {
              "type": "string",
              "subtype": "date",
              "format": "date"
            },
            {
              "type": "null"
            }
          ]
        }
      }
    },
    {
      "name": "bounding_box",
      "description": "Bounding Box",
      "schema": {
        "type": "object",
        "subtype": "bounding-box",
        "required": [
          "west",
          "south",
          "east",
          "north"
        ],
        "properties": {
          "west": {
            "type": "number",
            "description": "West (lower left corner, coordinate axis 1)."
          },
          "south": {
            "type": "number",
            "description": "South (lower left corner, coordinate axis 2)."
          },
          "east": {
            "type": "number",
            "description": "East (upper right corner, coordinate axis 1)."
          },
          "north": {
            "type": "number",
            "description": "North (upper right corner, coordinate axis 2)."
          },
          "crs": {
            "description": "Coordinate reference system of the extent, specified as as [EPSG code](http://www.epsg-registry.org/) or [WKT2 CRS string](http://docs.opengeospatial.org/is/18-010r7/18-010r7.html). Defaults to `4326` (EPSG code 4326) unless the client explicitly requests a different coordinate reference system.",
            "anyOf": [
              {
                "type": "integer",
                "subtype": "epsg-code",
                "title": "EPSG Code",
                "minimum": 1000
              },
              {
                "type": "string",
                "subtype": "wkt2-definition",
                "title": "WKT2 definition"
              }
            ],
            "default": 4326
          }
        }
      },
      "default": {
        "west": 11.1,
        "south": 48.0,
        "east": 11.3,
        "north": 48.2,
        "crs": "EPSG:4326"
      },
      "optional": true
    },
    {
      "name": "max_cloud_cover",
      "description": "Maximum allowed scene-wide cloud cover for the scene to be considered in the composite",
      "schema": {
        "type": "number"
      },
      "default": 80,
      "optional": true
    },
    {
      "name": "nmad_sigma",
      "description": "Sigma for median absolute deviation outlier detection in Band B02, default=3.0",
      "schema": {
        "type": "number"
      },
      "default": 3.0,
      "optional": true
    }
  ]
}